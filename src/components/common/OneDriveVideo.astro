---
// Component hiển thị video OneDrive
// Tuân thủ phong cách minimalist, không gradient

export interface Props {
  url: string;
  title?: string;
  className?: string;
}

const { url, title = "Video", className = '' } = Astro.props;

// Chuyển đổi URL OneDrive thành embed URL
const getEmbedUrl = (url: string) => {
  // Tách ID từ URL OneDrive
  const match = url.match(/\/d\/([a-zA-Z0-9_-]+)/);
  if (match) {
    const fileId = match[1];
    return `https://onedrive.live.com/embed?resid=${fileId}&authkey=!&em=2`;
  }
  return url;
};

const embedUrl = getEmbedUrl(url);
---

<div class={`onedrive-video ${className}`}>
  <iframe 
    src={embedUrl}
    title={title}
    frameborder="0"
    scrolling="no"
    allowfullscreen
  ></iframe>
</div>

<style>
  .onedrive-video {
    position: relative;
    width: 100%;
    height: 0;
    padding-bottom: 56.25%; /* 16:9 aspect ratio */
    overflow: hidden;
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-md);
  }

  .onedrive-video iframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: none;
  }

  /* Responsive */
  @media (max-width: 768px) {
    .onedrive-video {
      border-radius: var(--radius-md);
    }
  }
</style>
